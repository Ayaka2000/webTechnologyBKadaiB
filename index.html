<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>課題B_g18909</title>
    <p>
      課題B　機能1の実装
    </p>
    <script language="JavaScript" type="text/javascript">
<!--
//----------【クッキー操作汎用プログラム】----------

//------------------------------------------------------
//  クッキーに記憶する
//  引数（キー名、値）　　　戻り値なし
//------------------------------------------------------
function setCookie(keyName,valueName){
	life=new Date()
	//寿命を３０日
	life.setTime(life.getTime()+24*60*60*1000*30);
	document.cookie=keyName+"="+escape(valueName)+"; expires="+life.toGMTString();
	
}
//------------------------------------------------------
//  クッキーから値を取得
//  引数（キー名）　　　戻り値　値
//------------------------------------------------------
function getCookie(keyName){
	var cookieKey=document.cookie.split("; ");
	for (var i=0;  i<cookieKey.length; i++){
		var cookieValue=cookieKey[i].split("=");
		if(keyName==cookieValue[0]){
				return unescape(cookieValue[1]);
		}
		
	}
	return null;
	
}
//------------------------------------------------------
//  クッキーを削除
//  引数（キー名）　　　戻り値なし
//------------------------------------------------------
function delCookie(keyName){
	document.cookie=keyName+"="+escape(' ')+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;";
	
}
//----------【クッキー操作汎用プログラムここまで】----------

function getName(){
	var msg;
	var yourName=getCookie("name");
	
	if(yourName==null){
		msg="こんにちは。初めての訪問です。";
	}
	else{
		msg=yourName+"さん　　こんにちは！";
	}
	document.write(msg);	
}

function setName(){
	var yourName="";
	yourName=document.frm_Cookie.txt_Name.value;
	if(yourName!=""){
		setCookie("name",yourName);
	}
	else{
		alert ("名前を入力してください");
	}	
}


//-->
</script>
  
  
  </head>
  
  <script language="JavaScript" type="text/javascript">
<!--
getName();	
//-->
</script>
<form name="frm_Cookie">
  <p>名前: 
    <input type="text" name="txt_Name" value="" />
  <p><p><p><p><p></p>
  <p> 
    <input type="button" value="クッキーに記憶する"onclick="setCookie('name',document.frm_Cookie.txt_Name.value)" />
    <input type="button" value="クッキーから削除する"onclick="delCookie('name')" />
  <p><p><p><p><p></p>
</form>
  
  
  </body>
</html>
